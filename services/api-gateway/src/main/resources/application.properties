# ==============================================================
# API GATEWAY - Configuração do Gateway de Roteamento
# ==============================================================

# Nome da aplicação
spring.application.name=api-gateway

# ==============================================================
# SERVIDOR
# ==============================================================
# Porta 8080 - mesma porta do monólito original
# Permite transição transparente para microsserviços
server.port=8080

# ==============================================================
# SPRING CLOUD GATEWAY - ROTAS
# ==============================================================

# Rota 1: Task Service
# Todas as requisições para /api/tasks/** são direcionadas ao Task Service
spring.cloud.gateway.routes[0].id=task-service
spring.cloud.gateway.routes[0].uri=http://task-service:8081
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/tasks/**

# Rota 2: Statistics Service  
# Todas as requisições para /api/statistics/** são direcionadas ao Statistics Service
spring.cloud.gateway.routes[1].id=statistics-service
spring.cloud.gateway.routes[1].uri=http://statistics-service:8082
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/statistics/**

# ==============================================================
# CORS - Configuração Global
# ==============================================================
# Permite requisições de qualquer origem (útil para desenvolvimento)
# Em produção, especificar origens permitidas
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-origins=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods=GET,POST,PUT,DELETE,OPTIONS
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-headers=*

# ==============================================================
# LOGGING
# ==============================================================
logging.level.org.springframework.cloud.gateway=INFO
logging.level.com.example.gateway=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# Log de rotas para debug
logging.level.org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator=DEBUG

# ==============================================================
# ACTUATOR
# ==============================================================
management.endpoints.web.exposure.include=*
management.endpoint.health.show-details=always
management.endpoint.gateway.enabled=true
management.server.port=8080

# ==============================================================
# TIMEOUTS E CIRCUIT BREAKER (Configuração Básica)
# ==============================================================
# Timeout global para requisições (30 segundos)
spring.cloud.gateway.httpclient.connect-timeout=30000
spring.cloud.gateway.httpclient.response-timeout=30s
